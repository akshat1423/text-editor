@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom overrides */

.prose-editor {
  @apply min-h-[60vh] cursor-text relative;
}

.btn-shimmer {
  background: linear-gradient(45deg, #4f46e5, #7c3aed, #db2777, #4f46e5);
  background-size: 300% 300%;
  animation: shimmer-bg 3s ease infinite;
}

.image-skeleton {
  position: relative;
  overflow: hidden;
  background: #e2e8f0;
}

.dark .image-skeleton {
  background: #1e293b;
}

.image-skeleton::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(110deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.6) 40%, rgba(255,255,255,0));
  animation: shimmer-bg 1.8s linear infinite;
}

.ProseMirror img[data-placeholder-id] {
  display: block;
  width: 100%;
  min-height: 260px;
  border-radius: 1rem;
  object-fit: cover;
  background: linear-gradient(110deg, #e2e8f0 0%, #f8fafc 40%, #e2e8f0 80%);
  animation: shimmer-bg 1.6s linear infinite;
  box-shadow: 0 20px 45px -20px rgba(15, 23, 42, 0.35);
}

.dark .ProseMirror img[data-placeholder-id] {
  background: linear-gradient(110deg, #1e293b 0%, #475569 40%, #1e293b 80%);
}

/* Global base tweaks to improve default appearance */
@layer base {
  html, body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: 'Raleway', ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  /* Ensure Tailwind's `font-sans` utility uses Raleway */
  .font-sans {
    font-family: 'Raleway', ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  /* Font helper classes for runtime switching */
  .font-raleway { font-family: 'Raleway', ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
  .font-inter { font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
  .font-lora { font-family: 'Lora', Georgia, 'Times New Roman', serif; }
  
    /* Restore list markers inside the ProseMirror editable area.
       Tailwind's preflight removes list-style for elements with classes; ProseMirror lists
       can end up without visible markers. These rules force visible bullets/numbers. */
    .ProseMirror ul {
      list-style-type: disc !important;
      list-style-position: outside !important;
      margin-left: 1.25rem;
      padding-left: 1.25rem;
    }
    .ProseMirror ol {
      list-style-type: decimal !important;
      list-style-position: outside !important;
      margin-left: 1.25rem;
      padding-left: 1.25rem;
    }
    .ProseMirror li {
      margin-top: 0.25rem;
      margin-bottom: 0.25rem;
    }

    /* Ensure bold/italic are visually distinct inside the editor */
    .ProseMirror strong, .ProseMirror b {
      font-weight: 700 !important;
    }
    .ProseMirror em, .ProseMirror i {
      font-style: italic !important;
    }

    /* Inline code styling */
    .ProseMirror code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Courier New', monospace;
      background: rgba(15,23,42,0.04);
      padding: 0.15rem 0.3rem;
      border-radius: 6px;
      font-size: 0.92em;
    }

  /* sensible max width for content area */
  .max-w-4xl { max-width: 68rem; }
}

/* Component utilities that use @apply should live in the components layer */
@layer components {
  .editor-card {
    border-radius: 1rem; /* approx rounded-2xl */
    overflow: hidden;
  }

  .prose-editor {
    min-height: 60vh;
    cursor: text;
    position: relative;
  }
}
